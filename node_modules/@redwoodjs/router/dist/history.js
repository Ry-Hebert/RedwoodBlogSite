"use strict";

var _interopRequireDefault = require("@babel/runtime-corejs3/helpers/interopRequireDefault");

var _Object$defineProperty = require("@babel/runtime-corejs3/core-js/object/define-property");

_Object$defineProperty(exports, "__esModule", {
  value: true
});

exports.navigate = exports.gHistory = void 0;

var _values = _interopRequireDefault(require("@babel/runtime-corejs3/core-js/object/values"));

var _now = _interopRequireDefault(require("@babel/runtime-corejs3/core-js/date/now"));

var createHistory = function createHistory() {
  var listeners = {};
  return {
    listen: function listen(listener) {
      var listenerId = 'RW_HISTORY_LISTENER_ID_' + (0, _now.default)();
      listeners[listenerId] = listener;
      window.addEventListener('popstate', listener);
      return listenerId;
    },
    navigate: function navigate(to) {
      window.history.pushState({}, null, to);

      for (var _i = 0, _Object$values = (0, _values.default)(listeners); _i < _Object$values.length; _i++) {
        var listener = _Object$values[_i];
        listener();
      }
    },
    remove: function remove(listenerId) {
      if (listeners[listenerId]) {
        var listener = listeners[listenerId];
        window.removeEventListener('popstate', listener);
        delete listeners[listenerId];
      } else {
        console.warn('History Listener with ID: ' + listenerId + ' does not exist.');
      }
    }
  };
};

var gHistory = createHistory();
exports.gHistory = gHistory;
var navigate = gHistory.navigate;
exports.navigate = navigate;